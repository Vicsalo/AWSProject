<!DOCTYPE html>
<html>
<head>
    <title>Address Verification</title>
    <script src="database.js" type="module"></script>
</head>
<body>
    <h1>Address Verification</h1>
    <form id="addressForm">
        <label for="Street">Street:</label>
        <input type="text" id="Street" required><br>

        <label for="City">City:</label>
        <input type="text" id="City" required><br>

        <label for="State">State:</label>
        <input type="text" id="State" required><br>

        <label for="Zipcode">ZIP Code:</label>
        <input type="text" id="Zipcode" required><br>

        <button type="submit">Verify Address</button>
    </form>
    <div id="result"></div>

    <script>
        document.getElementById("addressForm").addEventListener("submit", function (event) {
            event.preventDefault(); // Prevents the default form submission
            submitForm();
        });

        function submitForm() {
            // Retrieve user input from the form
            const street = document.getElementById("Street").value;
            const city = document.getElementById("City").value;
            const state = document.getElementById("State").value;
            const zip = document.getElementById("Zipcode").value;

            // Create an object with the user input
            const userData = {
                Zipcode: zip,
                AddressLine1: street,
                City: city,
                State: state,
            };

            // Set up the request options with the Authorization header
            const requestOptions = {
                method: "GET",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": "Basic " + btoa("admin:password"),
                },
                body: JSON.stringify(userData),
            };

            // Send the data to the server using an AJAX request
            fetch("/verify-address", requestOptions)
                .then((response) => response.json())
                .then((data) => {
                    // Handle the response from the server (data contains the verification result)
                    document.getElementById("result").textContent = data.message;
                })
                .catch((error) => {
                    console.error("Error:", error);
                });
        }
    </script>
</body>
</html>
